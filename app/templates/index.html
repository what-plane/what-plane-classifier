<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatPlane</title>
    <script src="https://kit.fontawesome.com/2a89b8821e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{url_for('static',filename='css/main.css')}}">
    <link rel="shortcut icon" href="{{url_for('static',filename='img/wp-favicon.ico')}}" type="image/x-icon">
</head>
<body class="bg-white">
    <div class="grid sm:grid-cols-2">
        <div class="container mx-auto px-10 py-10">
            <a href="{{ url_for('image_predict') }}"><img src="{{url_for('static',filename='img/whatplane.svg')}}" alt=""></a>
        </div>
        {% if not class_name  %}
            <div class="container mx-auto py-10 px-5">
                <div class="mx-auto py-2 px-2 rounded-lg border-black border-4 border-opacity-10 border-dashed h-4/6">
                    <div class="flex w-full items-center h-full justify-center bg-grey-lighter">
                        <label class="w-3/12 flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue hover:text-blue-500">
                            <form class="form-signin" method=post enctype=multipart/form-data>
                                <div class="rounded-2xl">
                                  <p class="text-center font-mono text-yellow-500 text-xs pt-3 pb-0">Select your image</p>
                                  <input type="file" name="file" class="cursor-pointer w-full opacity-0 pin-r pin-t" id="inputfile" onchange="form.submit()">
                                </div>
                                <br/>
                                <button class=" hidden justify-center mt-2 py-2 px-4 border-2 shadow-lg text-sm font-medium rounded-md text-yellow-500 font-mono hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" type="submit">Upload</button>
                                </form>                            
                        </label>
                    </div>
                </div>
            </div>
            </div>
        {% elif class_id is string %}
        <div class="container mx-auto py-10 px-5">
          <div class="mx-auto py-2 px-2 rounded-lg h-5/6">
              <div class="flex w-full h-full items-center justify-center">
                  <div class="flex flex-col items-center px-4 py-2 bg-opacity-80 rounded-lg bg-black tracking-wide border">
                    <div class="bg-opacity-80 overflow-hidden border-b-4 border-blue-500">
                      <img src="{{url_for('static',filename='uploads/'+filename)}}" alt="Image" class="w-full object-contain h-72">
                      <div class="p-4 md:p-6">
                        <p class="font-mono font-semibold text-base text-white mb-4  leading-none ">Prediction</p>
                        <h3 class="font-semibold text-yellow-500 mb-2 text-xl leading-tight sm:leading-normal"><span class="text-red-500"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></span> Looks like you uploaded a {{class_name}}, not an airplane!</h3>
                      </div>
                    </div>
                  </div>
                </div>
          </div>
        </div>        
        {% else %}
        <div class="container mx-auto py-10 px-5">
          <div class="mx-auto py-2 px-2 rounded-lg h-5/6">
              <div class="flex w-full h-full items-center justify-center">
                  <div class="flex flex-col items-center px-4 py-2 bg-opacity-80 rounded-lg bg-black tracking-wide border">
                    <div class="bg-opacity-80 overflow-hidden border-b-4 border-blue-500">
                      <img src="{{url_for('static',filename='uploads/'+filename)}}" alt="Image" class="w-full object-contain h-72">
                      <div class="p-4 md:p-6">
                        <p class="font-mono font-semibold text-base text-white mb-4  leading-none ">Prediction</p>
                        <h3 class="font-semibold text-yellow-500 mb-2 text-xl leading-tight sm:leading-normal">{{class_name}}</h3>
                        {% if class_id > 85 %}
                        <span class="inline-block bg-green-500 text-xs font-bold px-2 py-2 rounded text-white">{{class_id}}%</span>
                        {% elif class_id > 65 %}
                          <span class="inline-block bg-yellow-500 text-xs font-bold px-2 py-2 rounded">{{class_id}}%</span>
                        {% else %}
                          <span class="inline-block bg-red-400 text-xs font-bold px-2 py-2 rounded">{{class_id}}%</span>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
          </div>
        </div>
        {% endif %}
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>    
    <script>
        document.getElementById("file").onchange = function() {
            document.getElementById("form").submit();
        }
    </script>
    <script type="text/javascript">
      $('#inputfile').bind('change', function() {
          let fileSize = this.files[0].size/1024/1024; // this gives in MB
          if (fileSize > 4) {
            $("#inputfile").val(null);
            alert('file is too big. images more than 1MB are not allowed')
            return
          }

          let ext = $('#inputfile').val().split('.').pop().toLowerCase();
          if($.inArray(ext, ['jpg','jpeg']) == -1) {
            $("#inputfile").val(null);
            alert('only jpeg/jpg files are allowed!');
          }
      });
    </script>
    
    
</body>
</html>
